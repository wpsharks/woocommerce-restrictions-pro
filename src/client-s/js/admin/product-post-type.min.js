(function(a){a(document).ready(function(){var e="rsxqjzypgdqmrnnkkkrmgshvnnnkzzvu";var d=window[e+"ProductPostTypeData"];var b=neyjfbxruwddgfeedwacfbggzbxkwfxhJQueryJsGridData;var c=function(){a("."+e+"-product-meta").each(function(){var l=a("#woocommerce-product-data");var q=a(this);var t=q.find('.-permissions-grid[data-toggle~="jquery-jsgrid"]');if(!l.length||!q.length||!t.length){return}else{if(q.data("setupComplete")){return}}q.data("setupComplete",true);var g=false;var m=q.data("variationKey");var h=m!==undefined;var n=a.parseJSON(q.find(".-product-permissions").val());var s=[{ID:0,title:""}];a.each(d.restrictionTitlesById,function(u,v){s.push({ID:u,title:v})});var p=[];a.each(d.productPermissionAccessOffsetDirectives,function(u,v){p.push({key:u,title:v})});var f=[];a.each(d.productPermissionExpireOffsetDirectives,function(u,v){f.push({key:u,title:v})});var o=function(u){return'<span class="woocommerce-help-tip" data-toggle="jquery-tip" data-tip="'+_.escape(u)+'"></span>'};t.jsGrid(a.extend({},b.defaultOptions,{data:n,noDataContent:d.i18n.noDataContent,insertingByDefault:n.length===0,sorting:false,paging:false,onRefreshed:function(u){if(g){return}g=true;t.find(".jsgrid-grid-body > table > tbody").sortable({placeholder:"ui-state-highlight",stop:function(w,v){this.wcVariationMightNeedUpdate()}.bind(this)})},onItemInserted:function(u){this.wcVariationMightNeedUpdate()},onItemUpdated:function(u){this.wcVariationMightNeedUpdate()},onItemDeleted:function(u){this.wcVariationMightNeedUpdate()},wcVariationMightNeedUpdate:function(){if(!h){return}q.closest(".woocommerce_variation").addClass("variation-needs-update");l.find("#variable_product_options").find("button.save-variation-changes").removeAttr("disabled").trigger("woocommerce_variations_input_changed")},rowClick:function(v){var u=a(v.event.target);if(u.is("a")){return}if(this._editingRow){this.updateItem()}this.editItem(u.closest("tr"))},fields:[{type:"number",align:"center",name:"product_id",css:"-property-product-id",title:d.i18n.productIdTitle,visible:false,},{width:"30%",type:"select",align:"center",name:"restriction_id",css:"-property-restriction-id",title:d.i18n.restrictionIdTitle+" "+o(d.i18n.restrictionIdTitleTip),visible:true,editing:true,inserting:true,valueField:"ID",valueType:"number",textField:"title",items:s,validate:{validator:function(v,u){return typeof v==="number"&&v>0},message:function(v,u){return"• "+d.i18n.restrictionAccessRequired}},itemTemplate:function(v,u){return v?"<strong>"+_.escape(d.restrictionTitlesById[v])+"</strong>":""}},{width:"30%",type:"select",align:"center",name:"access_offset_directive",css:"-property-access-offset-directive",title:d.i18n.accessOffsetDirectiveTitle+" "+o(d.i18n.accessOffsetDirectiveTitleTip),visible:true,editing:true,inserting:true,valueField:"key",valueType:"string",textField:"title",allowOther:true,otherPlaceholderText:d.i18n.accessOffsetDirectiveOtherPlaceholder,items:p,validate:{validator:function(v,u){return typeof v==="string"&&v&&v!=="0"},message:function(v,u){return"• "+d.i18n.accessOffsetDirectiveRequired}}},{width:"30%",type:"select",align:"center",name:"expire_offset_directive",css:"-property-expire-offset-directive",title:d.i18n.expireOffsetDirectiveTitle+" "+o(d.i18n.expireOffsetDirectiveTitleTip1)+o(d.i18n.expireOffsetDirectiveTitleTip2),visible:true,editing:true,inserting:true,valueField:"key",valueType:"string",textField:"title",allowOther:true,otherPlaceholderText:d.i18n.expireOffsetDirectiveOtherPlaceholder,items:f,validate:{validator:function(v,u){return typeof v==="string"&&v&&v!=="0"},message:function(v,u){return"• "+d.i18n.expireOffsetDirectiveRequired}}},{type:"number",align:"center",name:"display_order",css:"-property-display-order",title:d.i18n.displayOrderTitle,visible:false,},a.extend({},b.controlDefaultOptions)]}));q.find('[data-toggle~="jquery-tip"]').tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200});var r=function(){if(h&&i()){l.find(".product_data_tabs .variations_tab > a").click()}else{l.find(".product_data_tabs .general_tab > a").click()}};var i=function(){var u=l.find("#product-type").val();return a.inArray(u,["variable","variable-subscription","variable_subscription"])!==-1};var k=function(){if(!h){return}var u=l.find("#variable_product_options");var v=u.find(".variation-needs-update");v.removeClass("variation-needs-update").addClass("variation-needed-update");setTimeout(function(){v.removeClass("variation-needed-update").addClass("variation-needs-update")},1000)};var j=function(w){var u=[];if(!a.contains(l[0],q[0])){return}if(h!==i()){return}var v=t.find(".jsgrid-insert-mode-button.jsgrid-mode-on-button").length!==0;var y=t.find(".jsgrid-grid-header > table > tbody > tr.jsgrid-insert-row");var x=y.find("> td.-property-restriction-id select").val();if(v&&x&&x!=="0"){r();alert(d.i18n.notReadyToSave+"\n• "+d.i18n.stillInserting);w.preventDefault(),w.stopImmediatePropagation();k();return false}if(t.find(".jsgrid-grid-body > table > tbody > tr.jsgrid-edit-row").length){t.data("JSGrid").updateItem()}t.find(".jsgrid-grid-body > table > tbody > tr:not(.jsgrid-nodata-row)").each(function(z){u.push(a.extend(a(this).data("JSGridItem"),{display_order:z}))});q.find(".-product-permissions").val(JSON.stringify(u))};if(h){l.on("woocommerce_variations_save_variations_button",j);l.on("woocommerce_variations_save_variations_on_submit",j)}else{q.closest("form").on("submit",j)}})};c();a(document).on("woocommerce_variations_added woocommerce_variations_loaded",c)})})(jQuery);